# Override images tag with --set version=...
# Chart.Version is used if no --set version.
# Chart.Version is set to latest in master branch. helm package rewrite it to tag value for releases.
# version: latest|0.2.3|0.2.2

# Basic-auth string. Generated by command:
# echo "PASSWORD" | htpasswd -ni USERNAME | base64 -w0
# Example:
# command: echo "PASSWORD" | htpasswd -ni admin | base64 -w0
# result: YWRtaW46JGFwcjEkMzdxSEwvTVIkcEFvdzEzZDUwMkd5VFc2VDNlQmJiMAoK
auth: YWRtaW46JGFwcjEkelhESkU5YTkkRkU0OFdnZlBMZlJJQjk0bVhXZVprMAoK

# Password for default user in clickhouse
clickhouse_pass_original: password

# Settings for ingress
ingress:
  enable: true
  enable_https: true
  clickhouse:
    host: clickhouse.domain.com
    path: "/"
    tls_secret_name: clickhouse
  loghouse:
    host: loghouse.domain.com
    path: "/"
    tls_secret_name: loghouse
  tabix:
    host: tabix.domain.com
    path: "/"
    tls_secret_name: loghouse
#  annotations:
#  - 'kubernetes.io/ingress.class: traefik'
#  - 'traefik.frontend.passHostHeader: "true"'

# Enable tabix
enable_tabix: false

# Docker custom path to get logs with fluentd. If docker installed on separate disk add --set to mount this path.
# docker_path: /data/docker

storage:
  emptyDir: true
  # You can use some storageClass or hostpath for clickhouse data storage
  # hostpath: /data
  # OR:
  # pvc:
  #   name: clickhouse
  #   accessMode: ReadWriteOnce
  #   size: 20Gi
  #   storageClassName: slow

# Custom partitioning, using LOGS_TABLES_PARTITION_PERIOD variable, in hours.
# 24 must be divisible by this value for now, so tables always can start with 00 hours (it's skipped for 24). Default is 24, as it was.
partition_period: 1


# If you want use nodeSelector for install clickhouse, loghouse on specific node
# nodeSelector:
#   key: 'node-role/logging'
#   value: ''

# If you want use taint for install only clickhouse, loghouse on specific node
# tolerations:
#   key: 'node-role/logging'
#   operator: 'Exists'
#   value: 'logging'
#   effect: 'NoSchedule'

# If you not want install fluentd on master node
install_master: false

imagePullPolicy: Always

clickhouse:
  # use nodeSelector for clickhouse to limit clickhouse nodes.
  #node_selector:
  #  key: 'node-role/logging'
  #  value: 'clickhouse'
  # Setup memory limit for clickhouse
  memlimits: 7000
  server: clickhouse
  port: 9000
  user: default
  db: logs
  table: logs
  resources:
    limits:
      cpu: 4
      memory: 8Gi
    requests:
      cpu: 1
      memory: 4Gi
fluentd:
  resources:
    limits:
      cpu: 1
      memory: 512Mi
    requests:
      cpu: 0.5
      memory: 256Mi
loghouse:
  resources:
    limits:
      cpu: 1
      memory: 1Gi
    requests:
      cpu: 0.5
      memory: 256Mi
tabix:
  resources:
    limits:
      memory: 512Mi
      cpu: 0.5
    requests:
      memory: 256Mi
      cpu: 0.2
